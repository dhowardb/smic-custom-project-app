"use strict";                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
sap.ui.define(["sap/m/MessageToast"], function (MessageToast) {                                                                                                                                                                                                
  "use strict";                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
  /**                                                                                                                                                                                                                                                          
   * Generated event handler.                                                                                                                                                                                                                                  
   *                                                                                                                                                                                                                                                           
   * @param this reference to the 'this' that the event handler is bound to.                                                                                                                                                                                   
   * @param event the event object provided by the event provider                                                                                                                                                                                              
   */                                                                                                                                                                                                                                                          
  function onPress(event) {                                                                                                                                                                                                                                    
    // MessageToast.show('Customer invoked action');                                                                                                                                                                                                           
  }                                                                                                                                                                                                                                                            
  var onPost = function onPost(event) {                                                                                                                                                                                                                        
    try {                                                                                                                                                                                                                                                      
      var _this = this;                                                                                                                                                                                                                                        
      if (!isEditingAllowed(_this.getModel('ui'))) {                                                                                                                                                                                                           
        MessageToast.show('Cannot post any content in Display Mode');                                                                                                                                                                                          
        return Promise.resolve();                                                                                                                                                                                                                              
      }                                                                                                                                                                                                                                                        
      var editFlow = _this.editFlow;                                                                                                                                                                                                                           
      var view = editFlow.getView();                                                                                                                                                                                                                           
      var getEvent = event.getSource();                                                                                                                                                                                                                        
      var id = event.getMetadata();                                                                                                                                                                                                                            
      var feedList = view.byId('projectsdemoappv2.projectsdemoappv2::ProjectsObjectPage--fe::CustomSubSection::FeedContent--feedsList');                                                                                                                       
      var commentFeedEntity = {                                                                                                                                                                                                                                
        Content: event.getParameter('value')                                                                                                                                                                                                                   
      };                                                                                                                                                                                                                                                       
      var feedListsBindingItems = feedList.getBinding('items');                                                                                                                                                                                                
      feedListsBindingItems.create(commentFeedEntity);                                                                                                                                                                                                         
      return Promise.resolve();                                                                                                                                                                                                                                
    } catch (e) {                                                                                                                                                                                                                                              
      return Promise.reject(e);                                                                                                                                                                                                                                
    }                                                                                                                                                                                                                                                          
  };                                                                                                                                                                                                                                                           
  function onPressDelete(event) {                                                                                                                                                                                                                              
    if (!isEditingAllowed(this.getModel('ui'))) {                                                                                                                                                                                                              
      MessageToast.show('Cannot delete any content in Display Mode');                                                                                                                                                                                          
      return;                                                                                                                                                                                                                                                  
    }                                                                                                                                                                                                                                                          
    var editFlow = this.editFlow;                                                                                                                                                                                                                              
    var view = editFlow.getView();                                                                                                                                                                                                                             
    var parameters = event.getParameter('item');                                                                                                                                                                                                               
    // eslint-disable-next-line fiori-custom/sap-no-ui5base-prop                                                                                                                                                                                               
    var feedListID = parameters.sId;                                                                                                                                                                                                                           
    var lineItemForAction = view.byId(feedListID);                                                                                                                                                                                                             
    var lineItemContext = lineItemForAction.getBindingContext();                                                                                                                                                                                               
    lineItemContext["delete"]();                                                                                                                                                                                                                               
  }                                                                                                                                                                                                                                                            
  function onPressEdit(event) {                                                                                                                                                                                                                                
    if (!isEditingAllowed(this.getModel('ui'))) {                                                                                                                                                                                                              
      MessageToast.show('Cannot edit any content in Display Mode');                                                                                                                                                                                            
      return;                                                                                                                                                                                                                                                  
    }                                                                                                                                                                                                                                                          
    MessageToast.show('Updating...');                                                                                                                                                                                                                          
    var editFlow = this.editFlow;                                                                                                                                                                                                                              
    var view = editFlow.getView();                                                                                                                                                                                                                             
    var parameters = event.getParameter('item');                                                                                                                                                                                                               
    // eslint-disable-next-line fiori-custom/sap-no-ui5base-prop                                                                                                                                                                                               
    var feedListID = parameters.sId;                                                                                                                                                                                                                           
    var lineItemForAction = view.byId(feedListID);                                                                                                                                                                                                             
    var lineItemContext = lineItemForAction.getBindingContext();                                                                                                                                                                                               
    var lineItemBinding = lineItemContext.getBinding();                                                                                                                                                                                                        
    var commentFeedEntity = {                                                                                                                                                                                                                                  
      Content: event.getParameter('value')                                                                                                                                                                                                                     
    };                                                                                                                                                                                                                                                         
  }                                                                                                                                                                                                                                                            
  function isEditingAllowed(uiModel) {                                                                                                                                                                                                                         
    if (!uiModel) {                                                                                                                                                                                                                                            
      return false; //or throw error                                                                                                                                                                                                                           
    }                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
    var isEditable = uiModel.bindList('/isEditable');                                                                                                                                                                                                          
    var isEditableModel = isEditable.getModel();                                                                                                                                                                                                               
    var isEditableDatas = isEditableModel.getData();                                                                                                                                                                                                           
    var editMode = isEditableDatas.editMode;                                                                                                                                                                                                                   
    var editObjects = {                                                                                                                                                                                                                                        
      display: 'Display',                                                                                                                                                                                                                                      
      editable: 'Editable'                                                                                                                                                                                                                                     
    };                                                                                                                                                                                                                                                         
    if (editMode === editObjects.display) {                                                                                                                                                                                                                    
      return false;                                                                                                                                                                                                                                            
    } else {                                                                                                                                                                                                                                                   
      return true;                                                                                                                                                                                                                                             
    }                                                                                                                                                                                                                                                          
  }                                                                                                                                                                                                                                                            
  var __exports = {                                                                                                                                                                                                                                            
    __esModule: true                                                                                                                                                                                                                                           
  };                                                                                                                                                                                                                                                           
  __exports.onPress = onPress;                                                                                                                                                                                                                                 
  __exports.onPost = onPost;                                                                                                                                                                                                                                   
  __exports.onPressDelete = onPressDelete;                                                                                                                                                                                                                     
  __exports.onPressEdit = onPressEdit;                                                                                                                                                                                                                         
  __exports.isEditingAllowed = isEditingAllowed;                                                                                                                                                                                                               
  return __exports;                                                                                                                                                                                                                                            
});                                                                                                                                                                                                                                                            